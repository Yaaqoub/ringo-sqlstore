<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>store - Ringo SqlStore</title>

        <link rel="shortcut icon" href="http://ringojs.org/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="http://ringojs.org/favicon.ico" type="image/x-icon" />
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,600&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="../static/jsdoc.css" />
<link rel="stylesheet" href="../static/style.css" />
<script type="text/javascript" src="../static/jquery.min.js"></script>
<script type="text/javascript" src="../static/jsdoc.js"></script>


  </head>

  <body class="jsdoc standalone">
    <div class="main">
        <div class="content jsdoc">
        
            <h1 class="modulename">Module store</h1>
        <div class="fileoverview">
            <p>Store instances represent the underlying database, providing
functionality for defining entities, manipulating and querying data.</p>


        </div>

        <div class="classoverview">

            <div class="classes">
                                <h2>Class <a href="#Store" class="jsdoc-title">Store</a></h2>
                                <h3>Instance Methods</h3>
                <ul class="propertyoverview">
                                        <li>
                        <a href="#Store.prototype.abortTransaction" class="jsdoc-title"> abortTransaction</a>()
                    </li>
                                        <li>
                        <a href="#Store.prototype.all" class="jsdoc-title"> all</a>(type)
                    </li>
                                        <li>
                        <a href="#Store.prototype.beginTransaction" class="jsdoc-title"> beginTransaction</a>()
                    </li>
                                        <li>
                        <a href="#Store.prototype.close" class="jsdoc-title"> close</a>()
                    </li>
                                        <li>
                        <a href="#Store.prototype.commitTransaction" class="jsdoc-title"> commitTransaction</a>()
                    </li>
                                        <li>
                        <a href="#Store.prototype.defineEntity" class="jsdoc-title"> defineEntity</a>(type, mapping)
                    </li>
                                        <li>
                        <a href="#Store.prototype.getConnection" class="jsdoc-title"> getConnection</a>()
                    </li>
                                        <li>
                        <a href="#Store.prototype.getEntityConstructor" class="jsdoc-title"> getEntityConstructor</a>(type)
                    </li>
                                        <li>
                        <a href="#Store.prototype.getTransaction" class="jsdoc-title"> getTransaction</a>()
                    </li>
                                        <li>
                        <a href="#Store.prototype.hasTransaction" class="jsdoc-title"> hasTransaction</a>()
                    </li>
                                        <li>
                        <a href="#Store.prototype.query" class="jsdoc-title"> query</a>(queryStr, nparams)
                    </li>
                                        <li>
                        <a href="#Store.prototype.setEntityCache" class="jsdoc-title"> setEntityCache</a>(cache)
                    </li>
                                        <li>
                        <a href="#Store.prototype.setQueryCache" class="jsdoc-title"> setQueryCache</a>(cache)
                    </li>
                                        <li>
                        <a href="#Store.prototype.sqlQuery" class="jsdoc-title"> sqlQuery</a>(queryStr, params)
                    </li>
                    </ul>
                                <h3>Static Methods</h3>
                <ul class="propertyoverview">
                                        <li>
                        <a href="#Store.initConnectionPool" class="jsdoc-title"> initConnectionPool</a>(props)
                    </li>
                    </ul>
                </div>
        </div>
        <div class="details">
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store">
                <h3 class="classtitle">
                    <span class="itemtitle"><a id="Store" href="#Store" class="itemtitle itemname">Store</a></span>
                    <span class="itemtitle light">(connectionPool)</span></h3>
                <div>
                    <p>Creates a new Store instance</p>


                </div>
                                <div>
                    <h4>Parameters</h4>
                    <table>
                                                <tr>
                            <td>ConnectionPool</td>
                            <td class="paramname">connectionPool</td>
                            <td>The connection pool to use</td>
                        </tr>
                        </table>
                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td></td>
                            <td>A new Store instance</td>
                        </tr>
                    </table>
                </div>
                                <div>
                    <h4>See</h4>
                    <div class="extrainfo">
                        <a href="../connection/pool/index.html">connection/pool</a>
                    </div>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.initConnectionPool">
                <h3 >
                    <span class="itemtitle">Store.<a id="Store.initConnectionPool" href="#Store.initConnectionPool" class="itemtitle itemname">initConnectionPool</a></span>
                    <span class="itemtitle light">(props)</span></h3>
                <div>
                    <p>Inititalizes the connection pool and returns it</p>


                </div>
                                <div>
                    <h4>Parameters</h4>
                    <table>
                                                <tr>
                            <td>Object</td>
                            <td class="paramname">props</td>
                            <td>The pool/connection properties to use</td>
                        </tr>
                        </table>
                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td>Object</td>
                            <td> The initialized connection pool</td>
                        </tr>
                    </table>
                </div>
                                <div>
                    <h4>See</h4>
                    <div class="extrainfo">
                        <a href="../connection/util/index.html#initConnectionPool">connection/util.initConnectionPool</a>
                    </div>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.abortTransaction">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.abortTransaction" href="#Store.prototype.abortTransaction" class="itemtitle itemname">abortTransaction</a></span>
                    <span class="itemtitle light">()</span></h3>
                <div>
                    <p>Aborts (i.e. rolls back) the transaction bound to the current thread and
closes it.</p>


                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.all">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.all" href="#Store.prototype.all" class="itemtitle itemname">all</a></span>
                    <span class="itemtitle light">(type)</span></h3>
                <div>
                    <p>Retrieves all instances of the given type from the database</p>


                </div>
                                <div>
                    <h4>Parameters</h4>
                    <table>
                                                <tr>
                            <td>String</td>
                            <td class="paramname">type</td>
                            <td>The type</td>
                        </tr>
                        </table>
                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td>Array</td>
                            <td> An array containing all instances of the given type</td>
                        </tr>
                    </table>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.beginTransaction">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.beginTransaction" href="#Store.prototype.beginTransaction" class="itemtitle itemname">beginTransaction</a></span>
                    <span class="itemtitle light">()</span></h3>
                <div>
                    <p>Starts a new transaction. Note that the transaction is bound to the thread,
so any SQL query issued during an open transaction is using the same
database connection.</p>


                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td>Transaction</td>
                            <td> The newly opened transaction</td>
                        </tr>
                    </table>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.close">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.close" href="#Store.prototype.close" class="itemtitle itemname">close</a></span>
                    <span class="itemtitle light">()</span></h3>
                <div>
                    <p>Closes all open connections to the database and clears all caches.</p>


                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.commitTransaction">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.commitTransaction" href="#Store.prototype.commitTransaction" class="itemtitle itemname">commitTransaction</a></span>
                    <span class="itemtitle light">()</span></h3>
                <div>
                    <p>Commits the transaction bound to the current thread and closes it.</p>


                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.defineEntity">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.defineEntity" href="#Store.prototype.defineEntity" class="itemtitle itemname">defineEntity</a></span>
                    <span class="itemtitle light">(type, mapping)</span></h3>
                <div>
                    <p>Defines an entity within this store. This method returns a constructor
function for creating new instances of this entity. All entity constructors
created by this method are registered within this store and can be
retrieved later on using <code>getEntityConstructor(type)</code>.</p>


                </div>
                                <div>
                    <h4>Parameters</h4>
                    <table>
                                                <tr>
                            <td>String</td>
                            <td class="paramname">type</td>
                            <td>The name of the entity constructor</td>
                        </tr>
                                                <tr>
                            <td>Object</td>
                            <td class="paramname">mapping</td>
                            <td>The database mapping object, defining the ID column
and all (optionally mapped) properties of entity instances.</td>
                        </tr>
                        </table>
                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td>Function</td>
                            <td> The entity constructor function</td>
                        </tr>
                    </table>
                </div>
                                <div>
                    <h4>See</h4>
                    <div class="extrainfo">
                        <a href="#Store.prototype.getEntityConstructor">Store.prototype.getEntityConstructor</a>
                    </div>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.getConnection">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.getConnection" href="#Store.prototype.getConnection" class="itemtitle itemname">getConnection</a></span>
                    <span class="itemtitle light">()</span></h3>
                <div>
                    <p>Returns a database connection object.</p>


                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td>java.sql.Connection</td>
                            <td> A database connection object</td>
                        </tr>
                    </table>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.getEntityConstructor">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.getEntityConstructor" href="#Store.prototype.getEntityConstructor" class="itemtitle itemname">getEntityConstructor</a></span>
                    <span class="itemtitle light">(type)</span></h3>
                <div>
                    <p>Returns the registered entity constructor for the given type.</p>


                </div>
                                <div>
                    <h4>Parameters</h4>
                    <table>
                                                <tr>
                            <td>String</td>
                            <td class="paramname">type</td>
                            <td>The name of the registered entity</td>
                        </tr>
                        </table>
                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td>Function</td>
                            <td> The entity constructor function</td>
                        </tr>
                    </table>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.getTransaction">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.getTransaction" href="#Store.prototype.getTransaction" class="itemtitle itemname">getTransaction</a></span>
                    <span class="itemtitle light">()</span></h3>
                <div>
                    <p>Returns the current transaction, or null if none has been opened.</p>


                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td>Transaction</td>
                            <td> The current transaction</td>
                        </tr>
                    </table>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.hasTransaction">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.hasTransaction" href="#Store.prototype.hasTransaction" class="itemtitle itemname">hasTransaction</a></span>
                    <span class="itemtitle light">()</span></h3>
                <div>
                    <p>Returns true if there is a transaction bound to the current thread.</p>


                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td>Boolean</td>
                            <td> True if a transaction is bound to the current thread</td>
                        </tr>
                    </table>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.query">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.query" href="#Store.prototype.query" class="itemtitle itemname">query</a></span>
                    <span class="itemtitle light">(queryStr, nparams)</span></h3>
                <div>
                    <p>Returns the result of the given query</p>


                </div>
                                <div>
                    <h4>Parameters</h4>
                    <table>
                                                <tr>
                            <td>String</td>
                            <td class="paramname">queryStr</td>
                            <td>The query string</td>
                        </tr>
                                                <tr>
                            <td>Object</td>
                            <td class="paramname">nparams</td>
                            <td>Optional object containing the named parameters
referenced in the query</td>
                        </tr>
                        </table>
                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td>Array</td>
                            <td> The result of the query</td>
                        </tr>
                    </table>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.setEntityCache">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.setEntityCache" href="#Store.prototype.setEntityCache" class="itemtitle itemname">setEntityCache</a></span>
                    <span class="itemtitle light">(cache)</span></h3>
                <div>
                    <p>Sets the cache passed as argument as entity data cache of this store</p>


                </div>
                                <div>
                    <h4>Parameters</h4>
                    <table>
                                                <tr>
                            <td>Cache</td>
                            <td class="paramname">cache</td>
                            <td>The entity cache to use</td>
                        </tr>
                        </table>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.setQueryCache">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.setQueryCache" href="#Store.prototype.setQueryCache" class="itemtitle itemname">setQueryCache</a></span>
                    <span class="itemtitle light">(cache)</span></h3>
                <div>
                    <p>Sets the cache passed as argument as query cache of this store</p>


                </div>
                                <div>
                    <h4>Parameters</h4>
                    <table>
                                                <tr>
                            <td>Cache</td>
                            <td class="paramname">cache</td>
                            <td>The query cache to use</td>
                        </tr>
                        </table>
                </div>
                </div>
                        <hr />
            <!-- tpl-docitem -->
            <div class="docitem" data-docitem="Store.prototype.sqlQuery">
                <h3 >
                    <span class="itemtitle">Store.prototype.<a id="Store.prototype.sqlQuery" href="#Store.prototype.sqlQuery" class="itemtitle itemname">sqlQuery</a></span>
                    <span class="itemtitle light">(queryStr, params)</span></h3>
                <div>
                    <p>Returns the result of the given raw SQL query</p>


                </div>
                                <div>
                    <h4>Parameters</h4>
                    <table>
                                                <tr>
                            <td>String</td>
                            <td class="paramname">queryStr</td>
                            <td>The SQL query string</td>
                        </tr>
                                                <tr>
                            <td>Array</td>
                            <td class="paramname">params</td>
                            <td>Optional array containing parameter values referenced
in the query</td>
                        </tr>
                        </table>
                </div>
                                <div>
                    <h4>Returns</h4>
                    <table>
                        <tr>
                            <td>Array</td>
                            <td> An array of objects containing the query results</td>
                        </tr>
                    </table>
                </div>
                </div>
            </div>
    
        </div>

        <nav class="jsdoc standalone">
            <h1>Ringo SqlStore</h1>
            <div class="jsdocSidenav">
   <div class="toggles">
      <a href="../index.html">&bull; Modules</a>
      <a href="../index_all.html">&bull; Overview</a>
   </div>

   <input id="filter" type="text" placeholder="Filter modules" />

   <ul id="modulelist">
            <li><a href="../basedialect/index.html">basedialect</a></li>
            <li><a href="../cache/index.html">cache</a></li>
            <li><a href="../collection/index.html">collection</a></li>
            <li><a href="../key/index.html">key</a></li>
            <li><a href="../main/index.html">main</a></li>
            <li><a href="../mapping/index.html">mapping</a></li>
            <li><a href="../storable/index.html">storable</a></li>
            <li><a href="../store/index.html">store</a></li>
            <li><a href="../transaction/index.html">transaction</a></li>
            <li><a href="../types/index.html">types</a></li>
            <li><a href="../util/index.html">util</a></li>
            <li><a href="../connection/pool/index.html">connection/pool</a></li>
            <li><a href="../connection/poolworker/index.html">connection/poolworker</a></li>
            <li><a href="../connection/util/index.html">connection/util</a></li>
            <li><a href="../databases/h2/index.html">databases/h2</a></li>
            <li><a href="../databases/mysql5/index.html">databases/mysql5</a></li>
            <li><a href="../databases/oracle/index.html">databases/oracle</a></li>
            <li><a href="../databases/postgresql/index.html">databases/postgresql</a></li>
            <li><a href="../query/ast/index.html">query/ast</a></li>
            <li><a href="../query/collectorgenerator/index.html">query/collectorgenerator</a></li>
            <li><a href="../query/normalizer/index.html">query/normalizer</a></li>
            <li><a href="../query/parser/index.html">query/parser</a></li>
            <li><a href="../query/query/index.html">query/query</a></li>
            <li><a href="../query/sqlgenerator/index.html">query/sqlgenerator</a></li>
      </ul>
</div>

        </nav>
    </div>
    </body>
</html>
